{"version":3,"file":"84.GZddPP0k.js","sources":["../../../../../../src/routes/Tutorial/In_Need_of_Scoping/SectionStore.ts","../../../../../../src/routes/Tutorial/In_Need_of_Scoping/PageContent.svelte","../../../../../../src/routes/Tutorial/In_Need_of_Scoping/+page.svelte"],"sourcesContent":["import { writable, type Writable } from 'svelte/store';\nimport type { Section } from '$lib/section/SectionType';\n\nexport const mySections: Writable<Section[]> = writable<Section[]>([]);\n","<script lang=\"ts\">\n\timport SectionComponent from '$lib/section/SectionComponent.svelte';\n\timport { mySections } from './SectionStore.js';\n\t$mySections = [\n\t\t{ title: 'In Need of Scoping', visible: false, ref: '#in-need-of-scoping-1' },\n\t\t{ title: 'A Simple View on Scoping', visible: false, ref: '#a-simple-view-on-scoping-2' },\n\t\t{ title: 'Defining name spaces', visible: false, ref: '#defining-name-spaces-3' }\n\t];\n\tlet visible: boolean[] = [];\n\t$: $mySections[0].visible = visible[0];\n\t$: $mySections[1].visible = visible[1];\n\t$: $mySections[2].visible = visible[2];\n\timport copy from 'copy-to-clipboard';\n\timport { onMount } from 'svelte';\n\n\t/**\n\t * This function will go through all the 'pre' elements\n\t * on the page and add a copy button to them.\n\t * Thanks to: https://slavbasharov.com/blog/adding-click-to-copy-code-markdown-blog\n\t */\n\tonMount(() => {\n\t\tconst codeBlocks = document.querySelectorAll('pre');\n\t\tcodeBlocks.forEach((block) => {\n\t\t\tconst copyPrompt = document.createElement('div');\n\t\t\tcopyPrompt.className = 'copy-prompt';\n\t\t\tconst copyPromptText = document.createElement('p');\n\t\t\tcopyPromptText.innerHTML = 'üëÜ Click to copy';\n\t\t\tcopyPromptText.className = 'copy-prompt-p';\n\t\t\tconst copyIcon = document.createElement('img');\n\t\t\tcopyIcon.src = '/icons/copy-icon.svg';\n\t\t\tcopyIcon.className = 'copy-prompt-img';\n\t\t\tcopyPrompt.appendChild(copyIcon);\n\t\t\tcopyPrompt.appendChild(copyPromptText);\n\t\t\tblock.appendChild(copyPrompt);\n\t\t\tblock.querySelector('.copy-prompt > p').addEventListener('click', (evt) => {\n\t\t\t\tcopy(block.querySelector('code').textContent);\n\t\t\t\tblock.querySelector('.copy-prompt > p').innerHTML = 'Copied!';\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tblock.querySelector('.copy-prompt > p').innerHTML = 'üëÜ Click to copy';\n\t\t\t\t}, 1000);\n\t\t\t});\n\t\t});\n\t});\n\timport PrevNextSection from '$lib/prevNext/PrevNextSection.svelte';\n\n\tlet prevLink = '/Tutorial/Projections_for_Expressions';\n\tlet nextLink = '/Tutorial/More_Scoping';\n\n\timport Figure from '$lib/figures/Figure.svelte';\n</script>\n\n<PrevNextSection {prevLink} {nextLink} />\n\n<SectionComponent tag=\"h1\" id=\"in-need-of-scoping-1\" bind:intersecting={visible[0]}>In Need of Scoping</SectionComponent>\n<p>\n\tIn this lesson we are going to restrict the references to questions that we can select in the grading of a page to only the questions that\n\tare on that page. For this, we need to define scope rules.\n</p>\n<SectionComponent tag=\"h2\" id=\"a-simple-view-on-scoping-2\" bind:intersecting={visible[1]}>A Simple View on Scoping</SectionComponent>\n<p>\n\tO my, you might think, this is a really difficult subject. But, with Freon we adhere to the philosophy that ‚Äù<em\n\t\t>Simple things should be simple, complex things should be possible.</em\n\t>‚Äù (Read our\n\t<a href=\"/Background\">Background</a> to find out more.) And in essence, scoping is not difficult at all.\n</p>\n<p>\n\tScoping is about the question of which names are accessible/visible where. In the general case, all names in a context are divided into\n\tsets. These sets do not overlap, but there are subsets of larger sets, as shown in the next figure.\n</p>\n<p>\n\tLet‚Äôs call the relationship between a name and the smallest possible subset that contains it: the set owns the name. For instance, in the\n\tfigure the name ‚ÄòPeter‚Äô is owned by set8. Using common scoping rules, any name is accessible/visible within the set that owns it, and\n\twithin any set that contains the name‚Äôs owner, but not in other sets. In the figure the name ‚ÄòPeter‚Äô would be accessible/visible in (from\n\tsmallest to largest) set8, set 4, set2, and set1. But it would not be accessible/visible in set3, set5, set6, and set7.\n</p>\n<Figure imageName={'tutorial/Tutorial-lesson6-namespaces.png'} caption={'Simple View on Namespaces'} figureNumber={1} />\n<p>\n\tIn Freon, we call these sets of names <strong>NameSpaces</strong>. Without any scope definition, in your editor there is just a single\n\tnamespace. It contains all the names present in your model.\n</p>\n<SectionComponent tag=\"h2\" id=\"defining-name-spaces-3\" bind:intersecting={visible[2]}>Defining name spaces</SectionComponent>\n<p>\n\tThere is a very easy way to define extra name spaces in Freon. Note, however, that any file that defines scoping must have the extension <code\n\t\t>.scope</code\n\t>. So, let‚Äôs create a file called <code>edu.scope</code>.\n</p>\n<p>\n\tFirst, we need to think about our DSL. Which names need to be kept from being seen in certain parts? The problem we had was with names of\n\tquestions that are visible in all pages, also in others than the one on which the names are defined. This means that the concept <code\n\t\t>Page</code\n\t>\n\tis a likely candidate to be a name space. Knowing this, we add the following lines to the <code>edu.scope</code> file.\n</p>\n<pre class=\"language-freon\">{@html `<code class=\"language-freon\"><span class=\"token comment\">// Education/lesson6-defs/edu.scope\n</span>\nscoper EducationScoper for language Education\n\n<span class=\"token class-name\">isnamespace</span> &#123; Page  &#125;\n</code>`}</pre>\n<p>\n\tThat‚Äôs it. Easy, peasy! You don‚Äôt believe it? Just try it out for yourselves, and you will see that in the score only the questions from\n\tthat page can be used.\n</p>\n<p>\n\tIn the following lessons we will learn a few more things about scoping. But first we need to define the last model unit, the <em>Test</em>\n\tunit.\n</p>\n\n<PrevNextSection {prevLink} {nextLink} />\n","<script lang=\"ts\">\n\timport { mySections } from './SectionStore.js';\n\timport type { Section } from '$lib/section/SectionType.js';\n\timport PageContent from './PageContent.svelte';\n\timport Breadcrumb from '$lib/breadcrumbs/Breadcrumb.svelte';\n\n\tlet showDetails: boolean = false;\n\t$: current = getCurrent($mySections);\n\n\tfunction getCurrent(internalSections: Section[]): number {\n\t\tlet previous = current;\n\t\tfor (let i = 0; i < internalSections.length; i++) {\n\t\t\tif (internalSections[i].visible) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn previous;\n\t}\n\tfunction toggleTocDetails() {\n\t\tshowDetails = !showDetails;\n\t}\n</script>\n\n<div class=\"page-main\">\n\t<div class=\"page-toc-small\">\n\t\t<p class=\"page-toc-small-title\">On this page ...</p>\n\t\t<button\n\t\t\tclass=\"page-toc-small-expand-button\"\n\t\t\ton:click={() => {\n\t\t\t\ttoggleTocDetails();\n\t\t\t}}\n\t\t>\n\t\t\t{#if showDetails}\n\t\t\t\t<img class=\"page-toc-small-img\" src=\"/icons/upload.png\" alt=\"arrow up\" />\n\t\t\t{:else}\n\t\t\t\t<img class=\"page-toc-small-img\" src=\"/icons/down-arrow.png\" alt=\"arrow down\" />\n\t\t\t{/if}\n\t\t</button>\n\t</div>\n\t{#if showDetails}\n\t\t<div class=\"toc-details\">\n\t\t\t<ul class=\"page-ul\">\n\t\t\t\t{#each $mySections as sec, index}\n\t\t\t\t\t<li class=\"page-toc-text\">\n\t\t\t\t\t\t<a class:page-visible={index === current} class:page-nonvisible={index !== current} href={sec.ref}>\n\t\t\t\t\t\t\t{sec.title}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t{/each}\n\t\t\t</ul>\n\t\t</div>\n\t{/if}\n\n\t<Breadcrumb />\n\t<PageContent />\n</div>\n\n<nav class=\"page-toc\">\n\t<h3 class=\"page-toc-title\">On this page</h3>\n\t<ul class=\"page-ul\">\n\t\t{#each $mySections as sec, index}\n\t\t\t<li class=\"page-toc-text\">\n\t\t\t\t<a class:page-visible={index === current} class:page-nonvisible={index !== current} href={sec.ref}>\n\t\t\t\t\t{sec.title}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t{/each}\n\t</ul>\n</nav>\n"],"names":["mySections","writable","ctx","sectioncomponent0_props","sectioncomponent1_props","sectioncomponent2_props","insert_hydration","target","p0","anchor","p1","p2","p3","p4","p5","p6","pre","p7","p8","sectioncomponent0_changes","sectioncomponent1_changes","sectioncomponent2_changes","prevLink","nextLink","$mySections","visible","onMount","block","copyPrompt","copyPromptText","copyIcon","evt","copy","$$self","value","set_store_value","img","i","div","append_hydration","ul","t0_value","attr","a","a_href_value","toggle_class","li","dirty","set_data","t0","create_if_block_1","create_if_block","div1","div0","p","button","nav","h3","showDetails","getCurrent","internalSections","previous","current","toggleTocDetails","$$invalidate"],"mappings":"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"}