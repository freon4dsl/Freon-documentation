{"version":3,"file":"14.2lmPqjJf.js","sources":["../../../../../../src/routes/Background/Projectional_Editing/SectionStore.ts","../../../../../../src/routes/Background/Projectional_Editing/PageContent.svelte","../../../../../../src/routes/Background/Projectional_Editing/+page.svelte"],"sourcesContent":["import { writable, type Writable } from 'svelte/store';\nimport type { Section } from '$lib/section/SectionType';\n\nexport const mySections: Writable<Section[]> = writable<Section[]>([]);\n","<script lang=\"ts\">\n\timport SectionComponent from '$lib/section/SectionComponent.svelte';\n\timport { mySections } from './SectionStore.js';\n\t$mySections = [\n\t\t{ title: 'What is Projectional Editing?', visible: false, ref: '#what-is-projectional-editing-1' },\n\t\t{ title: 'Projectional workflow', visible: false, ref: '#projectional-workflow-2' },\n\t\t{ title: 'Support For Expressions', visible: false, ref: '#support-for-expressions-3' },\n\t\t{ title: 'Adding to an Existing Expression', visible: false, ref: '#adding-to-an-existing-expression-4' },\n\t\t{ title: 'Persistence', visible: false, ref: '#persistence-5' }\n\t];\n\tlet visible: boolean[] = [];\n\t$: $mySections[0].visible = visible[0];\n\t$: $mySections[1].visible = visible[1];\n\t$: $mySections[2].visible = visible[2];\n\t$: $mySections[3].visible = visible[3];\n\t$: $mySections[4].visible = visible[4];\n\timport copy from 'copy-to-clipboard';\n\timport { onMount } from 'svelte';\n\n\t/**\n\t * This function will go through all the 'pre' elements\n\t * on the page and add a copy button to them.\n\t * Thanks to: https://slavbasharov.com/blog/adding-click-to-copy-code-markdown-blog\n\t */\n\tonMount(() => {\n\t\tconst codeBlocks = document.querySelectorAll('pre');\n\t\tcodeBlocks.forEach((block) => {\n\t\t\tconst copyPrompt = document.createElement('div');\n\t\t\tcopyPrompt.className = 'copy-prompt';\n\t\t\tconst copyPromptText = document.createElement('p');\n\t\t\tcopyPromptText.innerHTML = 'ðŸ‘† Click to copy';\n\t\t\tcopyPromptText.className = 'copy-prompt-p';\n\t\t\tconst copyIcon = document.createElement('img');\n\t\t\tcopyIcon.src = '/icons/copy-icon.svg';\n\t\t\tcopyIcon.className = 'copy-prompt-img';\n\t\t\tcopyPrompt.appendChild(copyIcon);\n\t\t\tcopyPrompt.appendChild(copyPromptText);\n\t\t\tblock.appendChild(copyPrompt);\n\t\t\tblock.querySelector('.copy-prompt > p').addEventListener('click', (evt) => {\n\t\t\t\tcopy(block.querySelector('code').textContent);\n\t\t\t\tblock.querySelector('.copy-prompt > p').innerHTML = 'Copied!';\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tblock.querySelector('.copy-prompt > p').innerHTML = 'ðŸ‘† Click to copy';\n\t\t\t\t}, 1000);\n\t\t\t});\n\t\t});\n\t});\n\timport PrevNextSection from '$lib/prevNext/PrevNextSection.svelte';\n\n\tlet prevLink = '/Background/Testimonial';\n\tlet nextLink = '/Background/About_the_Name';\n\n\timport Figure from '$lib/figures/Figure.svelte';\n</script>\n\n<PrevNextSection {prevLink} {nextLink} />\n\n<SectionComponent tag=\"h1\" id=\"what-is-projectional-editing-1\" bind:intersecting={visible[0]}\n\t>What is Projectional Editing?</SectionComponent\n>\n<p>\n\tThe essential characteristic of projectional editing is that the user manipulates the Abstract Syntax Tree (AST) directly. In contrast,\n\tthe traditional manner of editing is that a user manipulates a text-string, which is then (re)parsed into a (changed) AST.\n</p>\n<p>\n\tFor a generic view on projectional editing see <a href=\"https://en.wikipedia.org/wiki/Structure*editor\" target=\"_blank\">this page</a> on Wikipedia.\n</p>\n<SectionComponent tag=\"h2\" id=\"projectional-workflow-2\" bind:intersecting={visible[1]}>Projectional workflow</SectionComponent>\n<p>The overall flow in a projectional editor generated by Freon is shown in this figure.</p>\n<Figure imageName={'background/projection-overview.png'} caption={'General flow of projectional editing'} figureNumber={1} />\n<ol>\n\t<li>The model/AST is mapped to a visual presentation (the projection).</li>\n\t<li>The projection is shown to the user.</li>\n\t<li>The user performs an action on the projection.</li>\n\t<li>The action on the projection is mapped to an action on the model/AST.</li>\n\t<li>(or 1 again) The changed model/AST is (re)mapped to a visual representation.</li>\n</ol>\n<SectionComponent tag=\"h2\" id=\"support-for-expressions-3\" bind:intersecting={visible[2]}>Support For Expressions</SectionComponent>\n<p>\n\tEditing expressions in a projectional editor is a well-known challenge. The representation of an expression in the AST is highly\n\tstructured. Yet, because its appearance to the user looks textual, users expect that the editing behavior resembles classical text editing\n\tas much as possible.\n</p>\n<p>\n\tIn <a href=\"https://www.voelter.de/data/pub/fse2016-projEditing.pdf\" target=\"_blank\"\n\t\t>Efficiency of Projectional Editing: A Controlled Experiment</a\n\t> the authors express the problem as follows.\n</p>\n<hr />\n<p>\n\tEditing expressions with their fine-grained tree structure is one of the major challenges in a projectional editor. The inability to\n\tinsert and remove parentheses in arbitrary places (and then refactor the treestructure according to the precedence expressed by the\n\tparentheses) is an example.\n</p>\n<p>[Markus Voelter a.o., Efficiency of Projectional Editing]</p>\n<hr />\n<p>\n\tFor this reason, Freon has in-build support for expressions. There is extra functionality to be able to add an expression before or after\n\tan existing expression. Secondly, the AST of any binary expression is automatically balanced.\n</p>\n<SectionComponent tag=\"h2\" id=\"adding-to-an-existing-expression-4\" bind:intersecting={visible[3]}\n\t>Adding to an Existing Expression</SectionComponent\n>\n<Figure imageName={'background/expressions-problem.png'} caption={'Editing expressions'} figureNumber={2} />\n<p>\n\tIn the above figure, when the user types a <code>+</code> symbol after the <code>**</code>, it is not enough to simply add the\n\t<code>+</code> in the AST.\n</p>\n<ul>\n\t<li>\n\t\tFirst of all, a placeholder should be added to make the expression structurally correct, so we should see something like\n\t\t<ul>\n\t\t\t<li><code>a * ... + b</code>.</li>\n\t\t</ul>\n\t</li>\n\t<li>Doing so will lead to the second AST shown.</li>\n\t<li>\n\t\tBut â€¦ this AST is not balanced right!\n\t\t<ul>\n\t\t\t<li>When adding parenthesis to show the AST, this will look like <code>a * (... + b)</code></li>\n\t\t\t<li>But the user (using his knowledge of priorities of <code>**</code> and <code>+</code>) will read <code>(a * ...) + b</code>.</li>\n\t\t</ul>\n\t</li>\n\t<li>\n\t\tTherefore, the AST needs to be re-balanced to take the priorities of the multiplication and addition into account. This re-balancing\n\t\tleads to the third AST show, where the structure of the AST properly reflects what the user understands.\n\t</li>\n</ul>\n<p>Freon understands this kind of tree balancing and will automatically apply them while editing expressions.</p>\n<SectionComponent tag=\"h2\" id=\"persistence-5\" bind:intersecting={visible[4]}>Persistence</SectionComponent>\n<p>\n\tTypical user actions are to <em>create</em> a new element in the AST, to <em>change</em> the content of an element, or to <em>delete</em> an\n\telement.\n</p>\n<p>\n\tCertainly, these changes may need to be persisted. When the user triggers the menu actions <em>save unit</em> or <em>open unit</em> the AST\n\tis pushed to or retrieved from a server.\n</p>\n<Figure imageName={'background/projection-overview.png'} caption={'General flow of projectional editing'} figureNumber={3} />\n\n<PrevNextSection {prevLink} {nextLink} />\n","<script lang=\"ts\">\n\timport { mySections } from './SectionStore.js';\n\timport type { Section } from '$lib/section/SectionType.js';\n\timport PageContent from './PageContent.svelte';\n\timport Breadcrumb from '$lib/breadcrumbs/Breadcrumb.svelte';\n\n\tlet showDetails: boolean = false;\n\t$: current = getCurrent($mySections);\n\n\tfunction getCurrent(internalSections: Section[]): number {\n\t\tlet previous = current;\n\t\tfor (let i = 0; i < internalSections.length; i++) {\n\t\t\tif (internalSections[i].visible) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn previous;\n\t}\n\tfunction toggleTocDetails() {\n\t\tshowDetails = !showDetails;\n\t}\n</script>\n\n<div class=\"page-main\">\n\t<div class=\"page-toc-small\">\n\t\t<p class=\"page-toc-small-title\">On this page ...</p>\n\t\t<button\n\t\t\tclass=\"page-toc-small-expand-button\"\n\t\t\ton:click={() => {\n\t\t\t\ttoggleTocDetails();\n\t\t\t}}\n\t\t>\n\t\t\t{#if showDetails}\n\t\t\t\t<img class=\"page-toc-small-img\" src=\"/icons/upload.png\" alt=\"arrow up\" />\n\t\t\t{:else}\n\t\t\t\t<img class=\"page-toc-small-img\" src=\"/icons/down-arrow.png\" alt=\"arrow down\" />\n\t\t\t{/if}\n\t\t</button>\n\t</div>\n\t{#if showDetails}\n\t\t<div class=\"toc-details\">\n\t\t\t<ul class=\"page-ul\">\n\t\t\t\t{#each $mySections as sec, index}\n\t\t\t\t\t<li class=\"page-toc-text\">\n\t\t\t\t\t\t<a class:page-visible={index === current} class:page-nonvisible={index !== current} href={sec.ref}>\n\t\t\t\t\t\t\t{sec.title}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t{/each}\n\t\t\t</ul>\n\t\t</div>\n\t{/if}\n\n\t<Breadcrumb />\n\t<PageContent />\n</div>\n\n<nav class=\"page-toc\">\n\t<h3 class=\"page-toc-title\">On this page</h3>\n\t<ul class=\"page-ul\">\n\t\t{#each $mySections as sec, index}\n\t\t\t<li class=\"page-toc-text\">\n\t\t\t\t<a class:page-visible={index === current} class:page-nonvisible={index !== current} href={sec.ref}>\n\t\t\t\t\t{sec.title}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t{/each}\n\t</ul>\n</nav>\n"],"names":["mySections","writable","ctx","sectioncomponent0_props","sectioncomponent1_props","sectioncomponent2_props","sectioncomponent3_props","sectioncomponent4_props","insert_hydration","target","p0","anchor","p1","p2","ol","p3","p4","hr0","p5","p6","hr1","p7","p8","ul2","p9","p10","p11","sectioncomponent0_changes","sectioncomponent1_changes","sectioncomponent2_changes","sectioncomponent3_changes","sectioncomponent4_changes","prevLink","nextLink","$mySections","visible","onMount","block","copyPrompt","copyPromptText","copyIcon","evt","copy","$$self","value","set_store_value","img","i","div","append_hydration","ul","t0_value","attr","a","a_href_value","toggle_class","li","dirty","set_data","t0","create_if_block_1","create_if_block","div1","div0","p","button","nav","h3","showDetails","getCurrent","internalSections","previous","current","toggleTocDetails","$$invalidate"],"mappings":"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"}