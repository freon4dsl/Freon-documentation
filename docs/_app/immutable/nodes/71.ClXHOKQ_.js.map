{"version":3,"file":"71.ClXHOKQ_.js","sources":["../../../../../../src/routes/Examples/External_Components/Replacing_a_Part_List/SectionStore.ts","../../../../../../src/routes/Examples/External_Components/Replacing_a_Part_List/PageContent.svelte","../../../../../../src/routes/Examples/External_Components/Replacing_a_Part_List/+page.svelte"],"sourcesContent":["import { writable, type Writable } from 'svelte/store';\nimport type { Section } from '$lib/section/SectionType';\n\nexport const mySections: Writable<Section[]> = writable<Section[]>([]);\n","<script lang=\"ts\">\n\timport SectionComponent from '$lib/section/SectionComponent.svelte';\n\timport { mySections } from './SectionStore.js';\n\t$mySections = [\n\t\t{ title: 'Replacing a Part List', visible: false, ref: '#replacing-a-part-list-1' },\n\t\t{ title: 'Step 1: Create the Svelte Component', visible: false, ref: '#step-1-create-the-svelte-component-2' },\n\t\t{ title: 'Step 2: Include in the Projection', visible: false, ref: '#step-2-include-in-the-projection-3' },\n\t\t{ title: 'Step 3: Do the Admin', visible: false, ref: '#step-3-do-the-admin-4' },\n\t\t{ title: 'Final Result', visible: false, ref: '#final-result-5' }\n\t];\n\tlet visible: boolean[] = [];\n\t$: $mySections[0].visible = visible[0];\n\t$: $mySections[1].visible = visible[1];\n\t$: $mySections[2].visible = visible[2];\n\t$: $mySections[3].visible = visible[3];\n\t$: $mySections[4].visible = visible[4];\n\timport copy from 'copy-to-clipboard';\n\timport { onMount } from 'svelte';\n\n\t/**\n\t * This function will go through all the 'pre' elements\n\t * on the page and add a copy button to them.\n\t * Thanks to: https://slavbasharov.com/blog/adding-click-to-copy-code-markdown-blog\n\t */\n\tonMount(() => {\n\t\tconst codeBlocks = document.querySelectorAll('pre');\n\t\tcodeBlocks.forEach((block) => {\n\t\t\tconst copyPrompt = document.createElement('div');\n\t\t\tcopyPrompt.className = 'copy-prompt';\n\t\t\tconst copyPromptText = document.createElement('p');\n\t\t\tcopyPromptText.innerHTML = 'ðŸ‘† Click to copy';\n\t\t\tcopyPromptText.className = 'copy-prompt-p';\n\t\t\tconst copyIcon = document.createElement('img');\n\t\t\tcopyIcon.src = '/icons/copy-icon.svg';\n\t\t\tcopyIcon.className = 'copy-prompt-img';\n\t\t\tcopyPrompt.appendChild(copyIcon);\n\t\t\tcopyPrompt.appendChild(copyPromptText);\n\t\t\tblock.appendChild(copyPrompt);\n\t\t\tblock.querySelector('.copy-prompt > p').addEventListener('click', (evt) => {\n\t\t\t\tcopy(block.querySelector('code').textContent);\n\t\t\t\tblock.querySelector('.copy-prompt > p').innerHTML = 'Copied!';\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tblock.querySelector('.copy-prompt > p').innerHTML = 'ðŸ‘† Click to copy';\n\t\t\t\t}, 1000);\n\t\t\t});\n\t\t});\n\t});\n\timport PrevNextSection from '$lib/prevNext/PrevNextSection.svelte';\n\n\tlet prevLink = '/Examples/External_Components/A_Wrapper_with_a_Button';\n\tlet nextLink = '/Examples/External_Components/A_Sorted_Table';\n\n\timport Figure from '$lib/figures/Figure.svelte';\n</script>\n\n<PrevNextSection {prevLink} {nextLink} />\n\n<SectionComponent tag=\"h1\" id=\"replacing-a-part-list-1\" bind:intersecting={visible[0]}>Replacing a Part List</SectionComponent>\n<p>\n\tIn this part of the extended example, youâ€™ll learn how to replace a part list in your application by creating a custom Svelte component, <code\n\t\t>StaffAccordion.svelte</code\n\t>, to display and manage a list of teachers within an accordion. Letâ€™s dive in step by step.\n</p>\n<SectionComponent tag=\"h2\" id=\"step-1-create-the-svelte-component-2\" bind:intersecting={visible[1]}\n\t>Step 1: Create the Svelte Component</SectionComponent\n>\n<p>\n\tWeâ€™ll start by creating the <code>StaffAccordion.svelte</code> component. This component will replace the default projection of the\n\t<code>teachers</code>\n\tproperty in the <code>Staff</code> model unit.\n</p>\n<h3 id=\"the-script-section-1\">The Script Section</h3>\n<p>Begin by defining the componentâ€™s parameters and the necessary state management functions:</p>\n<pre\n\tclass=\"language-ts\">{@html `<code class=\"language-ts\"><span class=\"token comment\">// CourseSchedule/phase4/src/external/StaffAccordion.svelte#L9-L55</span>\n\n<span class=\"token comment\">// This component replaces the component for \"teachers: Person[];\" from model unit \"Staff\".</span>\n<span class=\"token comment\">// This property is a parts list, therefore the external box to use is an ExternalPartListBox.</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> box<span class=\"token operator\">:</span> ExternalPartListBox<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> editor<span class=\"token operator\">:</span> FreEditor<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> panelOpen<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// List of booleans to indicate which panel is open (true) and closed (false).</span>\n<span class=\"token keyword\">let</span> multiplePar<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// Indicates whether multiple panels may be open at the same time.</span>\n\n<span class=\"token comment\">/*\n    Sets all panels in the state 'closed',\n    and sets the length of 'panelOpen'.\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">let</span> param<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span><span class=\"token function\">findParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"multi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>param <span class=\"token operator\">===</span> <span class=\"token string\">\"multiple\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        multiplePar <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    panelOpen <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> box<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// this also sets the length of panelOpen!</span>\n        panelOpen<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        box<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>isVisible <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// the child boxes are not currently shown</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">// The following four functions need to be included for the editor to function properly.</span>\n<span class=\"token comment\">// Please, set the focus to the first editable/selectable element in this component.</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setFocus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">let</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> box<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>panelOpen<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            box<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setFocus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">const</span> refresh <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>why<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// do whatever needs to be done to refresh the elements that show information from the model</span>\n    <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">onMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    box<span class=\"token punctuation\">.</span>setFocus <span class=\"token operator\">=</span> setFocus<span class=\"token punctuation\">;</span>\n    box<span class=\"token punctuation\">.</span>refreshComponent <span class=\"token operator\">=</span> refresh<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">afterUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    box<span class=\"token punctuation\">.</span>setFocus <span class=\"token operator\">=</span> setFocus<span class=\"token punctuation\">;</span>\n    box<span class=\"token punctuation\">.</span>refreshComponent <span class=\"token operator\">=</span> refresh<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code>`}</pre>\n<p>\n\tWe have implemented the <code>setFocus</code> function such that when the focus is programmatically set to the list, it is redirected to\n\tthe element in the first panel that is open. Furthermore, we have added an <code>initialize</code> function, which does two things. It\n\tfinds the parameter that is given in the .edit file under the name <code>multi</code>, and it initializes the <code>panelOpen</code> variable.\n</p>\n<p>\n\tAlso, we need to take care of adding to and removing from the list. Therefore, we add two functions\n\t<code>addPerson</code> and <code>removePerson</code>. Because the reactivity of the AST model is implemented using the\n\t<a href=\"https://mobx.js.org/\" target=\"_blank\">MobX</a>\n\tstate management library, we need to put any changes to the AST inside a MobX action. Freon provides two methods for this purpose:\n\t<code>AST.change</code>\n\tand\n\t<code>AST.changeNamed</code>. The latter is only useful for logging purposes, and will not be used in this example. The rest of the\n\timplementation of both functions is straightforward. We get the list of AST nodes from the box using <code>Box.getPropertyValue()</code>,\n\tand change it.\n</p>\n<pre\n\tclass=\"language-ts\">{@html `<code class=\"language-ts\"><span class=\"token comment\">// CourseSchedule/phase4/src/external/StaffAccordion.svelte#L57-L72</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addPerson</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// Note that you need to put any changes to the actual model in a 'AST.change or AST.changeNamed',</span>\n    <span class=\"token comment\">// because all elements in the model are reactive using mobx.</span>\n    <span class=\"token constant\">AST</span><span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">let</span> newPerson<span class=\"token operator\">:</span> Person <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        box<span class=\"token punctuation\">.</span><span class=\"token function\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">removePerson</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>index<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token comment\">// Note that you need to put any changes to the actual model in a 'AST.change' or</span>\n    <span class=\"token comment\">// 'AST.changeNamed', because all elements in the AST model are reactive using mobx.</span>\n    <span class=\"token constant\">AST</span><span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        box<span class=\"token punctuation\">.</span><span class=\"token function\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code>`}</pre>\n<p>That done, we need to call both functions somewhere in the HTML section of the component.</p>\n<h3 id=\"the-html-section-2\">The HTML Section</h3>\n<p>\n\tThe actual HTML in the component consists of a <code>div</code> with the <code>Accordion</code>, and an icon button to add an element to\n\tthe list. We have added some inline styling, just to make things look a little bit better, but the focus of this example is not on\n\tstyling, therefore it is kept to a minimum.\n</p>\n<p>\n\tIn the <code>Accordion</code> component we loop over the children of the box, using both the child box and its index in the list. We\n\tcreate a <code>Panel</code> for each childBox, setting it to <code>open</code> based the value in <code>panelOpen[index]</code>. Take a\n\tlook at the header of each <code>Panel</code>, which contains information from the AST model. Every box is associated with the AST node\n\tthat it represents. This AST node can be accessed using <code>childBox.node</code>, which returns an object of type <code>FreNode</code>.\n\tAlso, every AST node knows its meta type, i.e. the concept from the .edit file that is used to instantiate the node. We can access this\n\tname using\n\t<code>childBox.node.freLanguageConcept()</code>. Here the result is a string with the value â€˜Personâ€™.\n</p>\n<p>\n\tWe can do even more with the AST, but because its type is <code>FreNode</code> and not <code>Person</code>, this is a little bit more\n\tcomplex. We could use a different variable, and cast the node to the right type, but that would mean that we have a lot more admin to do\n\tin the <code>initialize</code> function. Therefore, we have chosen to access the information using a generic TypeScript manner called\n\t<a href=\"https://www.typescriptlang.org/docs/handbook/2/indexed-access-types.html\" target=\"_blank\">typed index accessing</a>\n\tto look up a specific property on another type: <code>childBox.node[\"name\"]</code>. This results in the name of the <code>Person</code> object.\n</p>\n<p>\n\tThe content of each panel is defined as the native Freon component for the child box coupled with an icon button that calls the <code\n\t\t>removePerson</code\n\t>\n\tfunction for that specific element in the list. The native Freon component is rendered by the Freon\n\t<code>RenderComponent</code> as in the <code>PhoneButton.svelte</code> component.\n</p>\n<pre\n\tclass=\"language-ts\">{@html `<code class=\"language-ts\"><span class=\"token comment\">// CourseSchedule/phase4/src/external/StaffAccordion.svelte#L78-L96</span>\n\n<span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token string\">\"display: flex; align-items: flex-end;\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Accordion multiple<span class=\"token operator\">=</span><span class=\"token string\">\"&#123;multiplePar&#125;\"</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">&#123;</span>#each box<span class=\"token punctuation\">.</span>children <span class=\"token keyword\">as</span> childBox<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">&#125;</span>\n            <span class=\"token operator\">&lt;</span>Panel bind<span class=\"token operator\">:</span>open<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>panelOpen<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>Header<span class=\"token operator\">></span>\n                    <span class=\"token punctuation\">&#123;</span>childBox<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span><span class=\"token function\">freLanguageConcept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#123;</span>childBox<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Header<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>Content<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token string\">\"display: flex; align-items: flex-end;\"</span><span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>RenderComponent box<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>childBox<span class=\"token punctuation\">&#125;</span> editor<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>editor<span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>IconButton <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"material-icons\"</span> on<span class=\"token operator\">:</span>click<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">removePerson</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span>remove<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>IconButton<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Content<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Panel<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">&#123;</span><span class=\"token operator\">/</span>each<span class=\"token punctuation\">&#125;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Accordion<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span>IconButton <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"material-icons\"</span> on<span class=\"token operator\">:</span>click<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">addPerson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span>add<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>IconButton<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></code>`}</pre>\n<h3 id=\"the-complete-component-3\">The Complete Component</h3>\n<p>Now that weâ€™ve defined the script and HTML sections, hereâ€™s the full component:</p>\n<pre\n\tclass=\"language-ts\">{@html `<code class=\"language-ts\"><span class=\"token comment\">// CourseSchedule/phase4/src/external/StaffAccordion.svelte</span>\n\n<span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span><span class=\"token operator\">></span>\n    <span class=\"token keyword\">import</span> Accordion<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span>Panel<span class=\"token punctuation\">,</span> Header<span class=\"token punctuation\">,</span> Content<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@smui-extra/accordion'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> IconButton <span class=\"token keyword\">from</span> <span class=\"token string\">'@smui/icon-button'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span><span class=\"token constant\">AST</span><span class=\"token punctuation\">,</span> ExternalPartListBox<span class=\"token punctuation\">,</span> FreEditor<span class=\"token punctuation\">,</span> FreNodeReference<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@freon4dsl/core\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span>RenderComponent<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@freon4dsl/core-svelte\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span>afterUpdate<span class=\"token punctuation\">,</span> onMount<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"svelte\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span>Person<span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../freon/language/gen/index.js\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// This component replaces the component for \"teachers: Person[];\" from model unit \"Staff\".</span>\n    <span class=\"token comment\">// This property is a parts list, therefore the external box to use is an ExternalPartListBox.</span>\n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> box<span class=\"token operator\">:</span> ExternalPartListBox<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> editor<span class=\"token operator\">:</span> FreEditor<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> panelOpen<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// List of booleans to indicate which panel is open (true) and closed (false).</span>\n    <span class=\"token keyword\">let</span> multiplePar<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// Indicates whether multiple panels may be open at the same time.</span>\n\n    <span class=\"token comment\">/*\n        Sets all panels in the state 'closed',\n        and sets the length of 'panelOpen'.\n     */</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">let</span> param<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span><span class=\"token function\">findParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"multi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>param <span class=\"token operator\">===</span> <span class=\"token string\">\"multiple\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            multiplePar <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        panelOpen <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> box<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token comment\">// this also sets the length of panelOpen!</span>\n            panelOpen<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            box<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>isVisible <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// the child boxes are not currently shown</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token comment\">// The following four functions need to be included for the editor to function properly.</span>\n    <span class=\"token comment\">// Please, set the focus to the first editable/selectable element in this component.</span>\n    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">setFocus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">let</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> box<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>panelOpen<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                box<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setFocus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">const</span> refresh <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>why<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// do whatever needs to be done to refresh the elements that show information from the model</span>\n        <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">onMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        box<span class=\"token punctuation\">.</span>setFocus <span class=\"token operator\">=</span> setFocus<span class=\"token punctuation\">;</span>\n        box<span class=\"token punctuation\">.</span>refreshComponent <span class=\"token operator\">=</span> refresh<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">afterUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        box<span class=\"token punctuation\">.</span>setFocus <span class=\"token operator\">=</span> setFocus<span class=\"token punctuation\">;</span>\n        box<span class=\"token punctuation\">.</span>refreshComponent <span class=\"token operator\">=</span> refresh<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addPerson</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// Note that you need to put any changes to the actual model in a 'AST.change or AST.changeNamed',</span>\n        <span class=\"token comment\">// because all elements in the model are reactive using mobx.</span>\n        <span class=\"token constant\">AST</span><span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">let</span> newPerson<span class=\"token operator\">:</span> Person <span class=\"token operator\">=</span> Person<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            box<span class=\"token punctuation\">.</span><span class=\"token function\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>newPerson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">removePerson</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>index<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">// Note that you need to put any changes to the actual model in a 'AST.change' or</span>\n        <span class=\"token comment\">// 'AST.changeNamed', because all elements in the AST model are reactive using mobx.</span>\n        <span class=\"token constant\">AST</span><span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span>\n            box<span class=\"token punctuation\">.</span><span class=\"token function\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token comment\">// Run the initialization</span>\n    <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token string\">\"display: flex; align-items: flex-end;\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Accordion multiple<span class=\"token operator\">=</span><span class=\"token string\">\"&#123;multiplePar&#125;\"</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">&#123;</span>#each box<span class=\"token punctuation\">.</span>children <span class=\"token keyword\">as</span> childBox<span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">&#125;</span>\n            <span class=\"token operator\">&lt;</span>Panel bind<span class=\"token operator\">:</span>open<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>panelOpen<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>Header<span class=\"token operator\">></span>\n                    <span class=\"token punctuation\">&#123;</span>childBox<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span><span class=\"token function\">freLanguageConcept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span> <span class=\"token punctuation\">&#123;</span>childBox<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">[</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Header<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>Content<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token string\">\"display: flex; align-items: flex-end;\"</span><span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>RenderComponent box<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>childBox<span class=\"token punctuation\">&#125;</span> editor<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span>editor<span class=\"token punctuation\">&#125;</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                        <span class=\"token operator\">&lt;</span>IconButton <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"material-icons\"</span> on<span class=\"token operator\">:</span>click<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">removePerson</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span>remove<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>IconButton<span class=\"token operator\">></span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Content<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Panel<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">&#123;</span><span class=\"token operator\">/</span>each<span class=\"token punctuation\">&#125;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Accordion<span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span>IconButton <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"material-icons\"</span> on<span class=\"token operator\">:</span>click<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">addPerson</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#125;</span><span class=\"token operator\">></span>add<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>IconButton<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n</code>`}</pre>\n<SectionComponent tag=\"h2\" id=\"step-2-include-in-the-projection-3\" bind:intersecting={visible[2]}\n\t>Step 2: Include in the Projection</SectionComponent\n>\n<p>\n\tTo integrate our new accordion component into the projection, we need to modify the <code>.edit</code> file. Specifically, weâ€™ll replace\n\tthe <code>teachers</code> property with the <code>StaffAccordion</code> component and pass the <code>multi</code> parameter to allow multiple\n\tpanels to be open. Note that parameter passing is string based. Any parameter is a key-value pair, where both the key and the value are strings.\n\tThere are no checks on any types or values.\n</p>\n<p>In your <code>.edit</code> file:</p>\n<pre\n\tclass=\"language-freon\">{@html `<code class=\"language-freon\"><span class=\"token comment\">// CourseSchedule/phase4/defs/externals.edit#L14-L18\n</span>\n<span class=\"token class-name\">Staff</span> &#123;<span class=\"token punctuation\">[</span>\nStaff <span class=\"token keyword\">in</span> the category: $&#123;<span class=\"token function\"><span class=\"token variable\">self</span>.name</span>&#125;\n\n    $&#123;<span class=\"token variable\">self</span>.teachers <span class=\"token keyword\">replace</span>=StaffAccordion multi=<span class=\"token string\">\"multiple\"</span>&#125;\n<span class=\"token punctuation\">]</span>&#125;</code>`}</pre>\n<SectionComponent tag=\"h2\" id=\"step-3-do-the-admin-4\" bind:intersecting={visible[3]}>Step 3: Do the Admin</SectionComponent>\n<p>\n\tAll that is left to do, is the familiar admin. Add <code>StaffAccordion</code> to the global section of your editorâ€™s definition and ensure\n\titâ€™s recognized as a custom component.\n</p>\n<p>In the <code>global</code> section of the <code>main.edit</code> file:</p>\n<pre class=\"language-freon\">{@html `<code class=\"language-freon\"><span class=\"token comment\">// CourseSchedule/phase4/defs/main.edit#L3-L9\n</span>\n<span class=\"token class-name\">global</span> &#123;\n    <span class=\"token class-name\">external</span> &#123;\n        PersonIcon,\n        PhoneButton,\n        StaffAccordion\n    &#125;\n&#125;</code>`}</pre>\n<p>\n\tIn the <code>externals.ts</code>, register <code>StaffAccordion</code> as a custom component. Donâ€™t forget to update your\n\t<code>package.json</code> file to include any library components.\n</p>\n<pre\n\tclass=\"language-ts\">{@html `<code class=\"language-ts\"><span class=\"token comment\">// CourseSchedule/phase4/src/external/externals.ts#L9-L15</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">configureExternals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token function\">setCustomComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">&#123;</span> component<span class=\"token operator\">:</span> PersonIcon<span class=\"token punctuation\">,</span> knownAs<span class=\"token operator\">:</span> <span class=\"token string\">\"PersonIcon\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#123;</span> component<span class=\"token operator\">:</span> PhoneButton<span class=\"token punctuation\">,</span> knownAs<span class=\"token operator\">:</span> <span class=\"token string\">\"PhoneButton\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">&#123;</span> component<span class=\"token operator\">:</span> StaffAccordion<span class=\"token punctuation\">,</span> knownAs<span class=\"token operator\">:</span> <span class=\"token string\">\"StaffAccordion\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span></code>`}</pre>\n<SectionComponent tag=\"h2\" id=\"final-result-5\" bind:intersecting={visible[4]}>Final Result</SectionComponent>\n<p>After following these steps, your editor will display the staff list in an accordion format. Hereâ€™s what the result will look like:</p>\n<ul>\n\t<li>\n\t\t<p><strong>All panels closed:</strong></p>\n\t\t<Figure imageName={'examples/CourseSchedule/Screenshot-step4a.png'} caption={'Staff model unit with Accordion'} figureNumber={1} />\n\t</li>\n\t<li>\n\t\t<p><strong>A panel open:</strong></p>\n\t\t<Figure imageName={'examples/CourseSchedule/Screenshot-step4b.png'} caption={'Accordion with open panel'} figureNumber={2} />\n\t</li>\n</ul>\n<h3 id=\"conclusion-4\">Conclusion</h3>\n<p>\n\tAnd thatâ€™s it! Youâ€™ve successfully replaced the <code>teachers</code> list with an accordion in Svelte. Next up, you will learn how to manipulate\n\tAST nodes and display them in a different order.\n</p>\n\n<PrevNextSection {prevLink} {nextLink} />\n","<script lang=\"ts\">\n\timport { mySections } from './SectionStore.js';\n\timport type { Section } from '$lib/section/SectionType.js';\n\timport PageContent from './PageContent.svelte';\n\timport Breadcrumb from '$lib/breadcrumbs/Breadcrumb.svelte';\n\n\tlet showDetails: boolean = false;\n\t$: current = getCurrent($mySections);\n\n\tfunction getCurrent(internalSections: Section[]): number {\n\t\tlet previous = current;\n\t\tfor (let i = 0; i < internalSections.length; i++) {\n\t\t\tif (internalSections[i].visible) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn previous;\n\t}\n\tfunction toggleTocDetails() {\n\t\tshowDetails = !showDetails;\n\t}\n</script>\n\n<div class=\"page-main\">\n\t<div class=\"page-toc-small\">\n\t\t<p class=\"page-toc-small-title\">On this page ...</p>\n\t\t<button\n\t\t\tclass=\"page-toc-small-expand-button\"\n\t\t\ton:click={() => {\n\t\t\t\ttoggleTocDetails();\n\t\t\t}}\n\t\t>\n\t\t\t{#if showDetails}\n\t\t\t\t<img class=\"page-toc-small-img\" src=\"/icons/upload.png\" alt=\"arrow up\" />\n\t\t\t{:else}\n\t\t\t\t<img class=\"page-toc-small-img\" src=\"/icons/down-arrow.png\" alt=\"arrow down\" />\n\t\t\t{/if}\n\t\t</button>\n\t</div>\n\t{#if showDetails}\n\t\t<div class=\"toc-details\">\n\t\t\t<ul class=\"page-ul\">\n\t\t\t\t{#each $mySections as sec, index}\n\t\t\t\t\t<li class=\"page-toc-text\">\n\t\t\t\t\t\t<a class:page-visible={index === current} class:page-nonvisible={index !== current} href={sec.ref}>\n\t\t\t\t\t\t\t{sec.title}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t{/each}\n\t\t\t</ul>\n\t\t</div>\n\t{/if}\n\n\t<Breadcrumb />\n\t<PageContent />\n</div>\n\n<nav class=\"page-toc\">\n\t<h3 class=\"page-toc-title\">On this page</h3>\n\t<ul class=\"page-ul\">\n\t\t{#each $mySections as sec, index}\n\t\t\t<li class=\"page-toc-text\">\n\t\t\t\t<a class:page-visible={index === current} class:page-nonvisible={index !== current} href={sec.ref}>\n\t\t\t\t\t{sec.title}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t{/each}\n\t</ul>\n</nav>\n"],"names":["mySections","writable","ctx","sectioncomponent0_props","sectioncomponent1_props","sectioncomponent2_props","sectioncomponent3_props","sectioncomponent4_props","insert_hydration","target","p0","anchor","p1","h30","p2","pre0","p3","p4","pre1","p5","h31","p6","p7","p8","p9","pre2","h32","p10","pre3","p11","p12","pre4","p13","p14","pre5","p15","pre6","p16","ul","append_hydration","li0","p17","li1","p18","h33","p19","sectioncomponent0_changes","sectioncomponent1_changes","sectioncomponent2_changes","sectioncomponent3_changes","sectioncomponent4_changes","prevLink","nextLink","$mySections","visible","onMount","block","copyPrompt","copyPromptText","copyIcon","evt","copy","$$self","value","set_store_value","img","i","div","t0_value","attr","a","a_href_value","toggle_class","li","dirty","set_data","t0","create_if_block_1","create_if_block","div1","div0","p","button","nav","h3","showDetails","getCurrent","internalSections","previous","current","toggleTocDetails","$$invalidate"],"mappings":"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"}