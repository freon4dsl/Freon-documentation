// Generated by the ProjectIt Language Generator.
import { PiElement, Box, BoxFactory, SelectBox, SelectOption, BehaviorExecutionResult, PiEditor, styleToCSS } from "@projectit/core";
import { EntityEnvironment } from "../../environment/gen/EntityEnvironment";

/**
 * Class EntitySelectionHelpers implements ... TODO
 * language Entity.
 */
export class EntitySelectionHelpers {
    public getReferenceBox(
        element: PiElement,
        role: string,
        placeholder: string,
        metaType: string,
        getAction: () => SelectOption,
        setAction: (o: SelectOption) => Promise<BehaviorExecutionResult>,
        initializer?: Partial<SelectBox>
    ): Box {
        return BoxFactory.select(
            element,
            role,
            placeholder,
            () => {
                return EntityEnvironment.getInstance()
                    .scoper.getVisibleNames(element, metaType)
                    .filter(name => !!name && name !== "")
                    .map(name => ({
                        id: name,
                        label: name
                    }));
            },
            () => getAction(),
            (editor: PiEditor, option: SelectOption) => setAction(option),
            initializer
        );
    }
}
