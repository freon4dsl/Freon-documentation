// Generated by the Freon Language Generator.
// This file contains the input to the AGL parser generator
// (see https://https://github.com/dhakehurst/net.akehurst.language).
// The grammar in this file is read by EducationModelUnitReader

export const EducationGrammarStr = `
namespace EducationLanguage
grammar EducationGrammar {

// rules for "Flow"
Flow = identifier 'for' 'topic' __fre_reference
	 FlowRule* ;

FlowRule = '-------------------------------------'
	 'Name:' identifier
	 'Description:' stringLiteral
	 'For' 'page' __fre_reference
	 PageTransition* ;

PageTransition = 'when' Grade 'goto' 'page' __fre_reference ;

// rules for "Topic"
Topic = 'Topic:' identifier
	 'Description:' stringLiteral
	 'Pages:'
	 Page* ;

Theory = '----------------------------------------------------'
	 'Theory' identifier
	 Line*
	 'Questions:' [ Question / '.' ]* ;

Line = 'Line' '\{'
	 'content' stringLiteral
	 '}' ;

Question = identifier
	 stringLiteral ;

SimpleNumber = 'SimpleNumber' '\{'
	 'value' numberLiteral
	 '}' ;

Fraction = 'Fraction' '\{'
	 'numerator' numberLiteral
	 'denominator' numberLiteral
	 '}' ;

GradeList = 'GradeList' '\{'
	 'list'
	 GradeScore*
	 '}' ;

GradeScore = 'GradeScore' '\{'
	 'expr' ScoreExpression
	 'grade' Grade
	 '}' ;

QuestionReference = 'QuestionReference' '\{'
	 'question' __fre_reference
	 '}' ;

NrOfCorrectAnswers = 'NrOfCorrectAnswers' '\{'
	 '}' ;

NumberLiteralExpression = 'NumberLiteralExpression' '\{'
	 'value' numberLiteral
	 '}' ;

Video = '----------------------------------------------------'
	 'Video' identifier
	 'Maybe' 'this' 'video' 'will' 'help' 'you' 'understand.'
	 stringLiteral
	 'Questions:' [ Question / '.' ]* ;

WorkSheet = '----------------------------------------------------'
	 'Worksheet' identifier
	 'See' 'if' 'you' 'can' 'answer' 'the' 'following' 'questions.'
	 'Questions:' [ Question / '.' ]* ;

ExamplePage = '----------------------------------------------------'
	 'Example' identifier
	 Line*
	 'Now,' 'please,' 'answer' 'the' 'following' 'questions.'
	 'Questions:' [ Question / '.' ]* ;

InDepthMaterial = '----------------------------------------------------'
	 identifier
	 Line*
	 'Test' 'your' 'understanding' 'by' 'answering' 'the' 'following' 'questions.'
	 'Questions:' [ Question / '.' ]* ;

Page = Theory 
    | WorkSheet 
    | ExamplePage 
    | InDepthMaterial 
    | Video  ;

NumberConcept = SimpleNumber 
    | Fraction  ;

ScoreExpression = QuestionReference 
    | NrOfCorrectAnswers 
    | NumberLiteralExpression 
    | __fre_binary_ScoreExpression ;

__fre_binary_ScoreExpression = [ScoreExpression / __fre_binary_operator]2+ ;
leaf __fre_binary_operator = 'GreaterOrEqualsExpression' | 'LessOrEqualsExpression' | 'GreaterThenExpression' | 'LessThenExpression' | 'EqualsExpression' | 'AndExpression' | 'OrExpression' ;

// rules for "Test"
Test = 'Test' identifier '\{'
	 'scenarios'
	 Scenario*
	 'topic' __fre_reference
	 'flow' __fre_reference
	 '}' ;

Scenario = 'Scenario' '\{'
	 'description' stringLiteral
	 'steps'
	 Step*
	 '}' ;

Step = 'Step' '\{'
	 'fromPage' __fre_reference
	 'expectedPage' __fre_reference
	 '}' ;

// common rules
Grade = 'gradeA'
	| 'gradeB'
	| 'gradeC'
	| 'gradeD'
	| 'gradeE'
	| 'gradeF' ;

__fre_reference = [ identifier / '.' ]+ ;

// white space and comments
skip WHITE_SPACE = "\\s+" ;
skip SINGLE_LINE_COMMENT = "//[^\\r\\n]*" ;
skip MULTI_LINE_COMMENT = "/\\*[^*]*\\*+(?:[^*/][^*]*\\*+)*/" ;

// the predefined basic types
leaf identifier          = "[a-zA-Z_][a-zA-Z0-9_]*" ;
/* see https://stackoverflow.com/questions/37032620/regex-for-matching-a-string-literal-in-java */
leaf stringLiteral       = '"' "[^\\"\\\\]*(\\\\.[^\\"\\\\]*)*" '"' ;
leaf numberLiteral       = "[0-9]+";
leaf booleanLiteral      = 'false' | 'true';

}`; // end of grammar
