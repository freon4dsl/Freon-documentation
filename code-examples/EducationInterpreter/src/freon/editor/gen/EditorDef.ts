// Generated by the Freon Language Generator.
import { FreLanguage, FreProjectionHandler, FreBoxProvider, BoxUtil, FreTableHeaderInfo } from "@freon4dsl/core";
import { freonConfiguration } from "../../config/FreonConfiguration.js";
import {
    FlowRule,
    PageTransition,
    GradeScore,
    QuestionReference,
    NrOfCorrectAnswers,
    NumberLiteralExpression,
    AndExpression,
    OrExpression,
    LessOrEqualsExpression,
    GreaterOrEqualsExpression,
    LessThenExpression,
    GreaterThenExpression,
    EqualsExpression,
    Scenario,
    TestFlow,
    Step,
    LastStep,
    Answer,
    Theory,
    Line,
    Video,
    WorkSheet,
    ExamplePage,
    InDepthMaterial,
    Question,
    SimpleNumber,
    Fraction,
} from "../../language/gen/index.js";
import {
    FlowRuleBoxProvider,
    PageTransitionBoxProvider,
    GradeScoreBoxProvider,
    QuestionReferenceBoxProvider,
    NrOfCorrectAnswersBoxProvider,
    NumberLiteralExpressionBoxProvider,
    AndExpressionBoxProvider,
    OrExpressionBoxProvider,
    LessOrEqualsExpressionBoxProvider,
    GreaterOrEqualsExpressionBoxProvider,
    LessThenExpressionBoxProvider,
    GreaterThenExpressionBoxProvider,
    EqualsExpressionBoxProvider,
    ScenarioBoxProvider,
    TestFlowBoxProvider,
    StepBoxProvider,
    LastStepBoxProvider,
    AnswerBoxProvider,
    TheoryBoxProvider,
    LineBoxProvider,
    VideoBoxProvider,
    WorkSheetBoxProvider,
    ExamplePageBoxProvider,
    InDepthMaterialBoxProvider,
    QuestionBoxProvider,
    SimpleNumberBoxProvider,
    FractionBoxProvider,
    FlowBoxProvider,
    SiteGroupBoxProvider,
    TestBoxProvider,
    TopicBoxProvider,
} from "../../editor/gen/index.js";

const map = new Map([
    // the main map
    [
        // Concept has special projection for (one of) its parts
        "FlowRule",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "rules_as_table",
                new Map([
                    ["name", ""], // special projection
                    ["description", ""], // special projection
                    ["page", ""], // special projection
                    ["transitions", "__TABLE__"], // special projection
                ]),
            ],
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["name", ""], // special projection
                    ["description", ""], // special projection
                    ["page", ""], // special projection
                    ["transitions", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "PageTransition",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["condition", ""], // special projection
                    ["toPage", ""], // special projection
                ]),
            ],
            [
                // Projection has special projection for some part
                "tableRowFor_rules_as_table",
                new Map([
                    ["condition", ""], // special projection
                    ["toPage", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "GradeScore",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["grade", ""], // special projection
                    ["expr", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "QuestionReference",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["question", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "NumberLiteralExpression",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["value", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Scenario",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["description", ""], // special projection
                    ["testFlow", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "TestFlow",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["steps", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Step",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["fromPage", ""], // special projection
                    ["answerSeries", "__TABLE__"], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "LastStep",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["fromPage", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Answer",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["value", ""], // special projection
                    ["question", ""], // special projection
                ]),
            ],
            [
                // Projection has special projection for some part
                "tableRowFor_default",
                new Map([
                    ["question", ""], // special projection
                    ["value", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Page",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["name", ""], // special projection
                ]),
            ],
            [
                // Projection has special projection for some part
                "footing",
                new Map([
                    ["questions", ""], // special projection
                    ["grading", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Theory",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["content", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Line",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["content", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Video",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["url", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "ExamplePage",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["content", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "InDepthMaterial",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["content", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Question",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["name", ""], // special projection
                    ["content", ""], // special projection
                    ["correctAnswer", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "SimpleNumber",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["value", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Fraction",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["numerator", ""], // special projection
                    ["denominator", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Flow",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["name", ""], // special projection
                    ["main", ""], // special projection
                    ["rules", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "SiteGroup",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["name", ""], // special projection
                    ["description", ""], // special projection
                    ["topics", ""], // special projection
                    ["flows", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Test",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["name", ""], // special projection
                    ["main", ""], // special projection
                    ["flow", ""], // special projection
                    ["scenarios", ""], // special projection
                ]),
            ],
        ]),
    ],
    [
        // Concept has special projection for (one of) its parts
        "Topic",
        new Map([
            // Projection has special projection for (one of) the parts
            [
                // Projection has special projection for some part
                "default",
                new Map([
                    ["main", ""], // special projection
                    ["name", ""], // special projection
                    ["description", ""], // special projection
                    ["pages", ""], // special projection
                ]),
            ],
        ]),
    ],
]);

/**
 * Adds all known projection groups to the root projection.
 * @param handler
 */
export function initializeProjections(handler: FreProjectionHandler) {
    handler.addProjection("Brackets");
    handler.addProjection("rules_as_table");
    handler.addProjection("footing");
    for (const p of freonConfiguration.customProjection) {
        handler.addCustomProjection(p);
    }
    handler.initConceptToPropertyProjection(map);
    handler.initProviderConstructors(
        new Map<string, () => FreBoxProvider>([
            [
                "FlowRule",
                () => {
                    return new FlowRuleBoxProvider(handler);
                },
            ],
            [
                "PageTransition",
                () => {
                    return new PageTransitionBoxProvider(handler);
                },
            ],
            [
                "GradeScore",
                () => {
                    return new GradeScoreBoxProvider(handler);
                },
            ],
            [
                "QuestionReference",
                () => {
                    return new QuestionReferenceBoxProvider(handler);
                },
            ],
            [
                "NrOfCorrectAnswers",
                () => {
                    return new NrOfCorrectAnswersBoxProvider(handler);
                },
            ],
            [
                "NumberLiteralExpression",
                () => {
                    return new NumberLiteralExpressionBoxProvider(handler);
                },
            ],
            [
                "AndExpression",
                () => {
                    return new AndExpressionBoxProvider(handler);
                },
            ],
            [
                "OrExpression",
                () => {
                    return new OrExpressionBoxProvider(handler);
                },
            ],
            [
                "LessOrEqualsExpression",
                () => {
                    return new LessOrEqualsExpressionBoxProvider(handler);
                },
            ],
            [
                "GreaterOrEqualsExpression",
                () => {
                    return new GreaterOrEqualsExpressionBoxProvider(handler);
                },
            ],
            [
                "LessThenExpression",
                () => {
                    return new LessThenExpressionBoxProvider(handler);
                },
            ],
            [
                "GreaterThenExpression",
                () => {
                    return new GreaterThenExpressionBoxProvider(handler);
                },
            ],
            [
                "EqualsExpression",
                () => {
                    return new EqualsExpressionBoxProvider(handler);
                },
            ],
            [
                "Scenario",
                () => {
                    return new ScenarioBoxProvider(handler);
                },
            ],
            [
                "TestFlow",
                () => {
                    return new TestFlowBoxProvider(handler);
                },
            ],
            [
                "Step",
                () => {
                    return new StepBoxProvider(handler);
                },
            ],
            [
                "LastStep",
                () => {
                    return new LastStepBoxProvider(handler);
                },
            ],
            [
                "Answer",
                () => {
                    return new AnswerBoxProvider(handler);
                },
            ],
            [
                "Theory",
                () => {
                    return new TheoryBoxProvider(handler);
                },
            ],
            [
                "Line",
                () => {
                    return new LineBoxProvider(handler);
                },
            ],
            [
                "Video",
                () => {
                    return new VideoBoxProvider(handler);
                },
            ],
            [
                "WorkSheet",
                () => {
                    return new WorkSheetBoxProvider(handler);
                },
            ],
            [
                "ExamplePage",
                () => {
                    return new ExamplePageBoxProvider(handler);
                },
            ],
            [
                "InDepthMaterial",
                () => {
                    return new InDepthMaterialBoxProvider(handler);
                },
            ],
            [
                "Question",
                () => {
                    return new QuestionBoxProvider(handler);
                },
            ],
            [
                "SimpleNumber",
                () => {
                    return new SimpleNumberBoxProvider(handler);
                },
            ],
            [
                "Fraction",
                () => {
                    return new FractionBoxProvider(handler);
                },
            ],
            [
                "Flow",
                () => {
                    return new FlowBoxProvider(handler);
                },
            ],
            [
                "SiteGroup",
                () => {
                    return new SiteGroupBoxProvider(handler);
                },
            ],
            [
                "Test",
                () => {
                    return new TestBoxProvider(handler);
                },
            ],
            [
                "Topic",
                () => {
                    return new TopicBoxProvider(handler);
                },
            ],
        ]),
    );
    handler.initTableHeaders([new FreTableHeaderInfo("PageTransition", "tableRowFor_rules_as_table", ["Condition", "Goto Page"])]);
}

/**
 * Adds trigger and reference shortcut info to the in-memory representation of structure of the language metamodel.
 */
export function initializeEditorDef() {
    FreLanguage.getInstance().concept("FlowRule").trigger = "FlowRule";
    FreLanguage.getInstance().concept("PageTransition").trigger = "PageTransition";
    FreLanguage.getInstance().concept("GradeScore").trigger = "GradeScore";
    FreLanguage.getInstance().concept("QuestionReference").trigger = "question";
    FreLanguage.getInstance().concept("NrOfCorrectAnswers").trigger = "NrOfCorrectAnswers";
    FreLanguage.getInstance().concept("NumberLiteralExpression").trigger = "NumberLiteralExpression";
    FreLanguage.getInstance().concept("AndExpression").trigger = "and";
    FreLanguage.getInstance().concept("OrExpression").trigger = "or";
    FreLanguage.getInstance().concept("LessOrEqualsExpression").trigger = "<=";
    FreLanguage.getInstance().concept("GreaterOrEqualsExpression").trigger = ">=";
    FreLanguage.getInstance().concept("LessThenExpression").trigger = "<";
    FreLanguage.getInstance().concept("GreaterThenExpression").trigger = ">";
    FreLanguage.getInstance().concept("EqualsExpression").trigger = "==";
    FreLanguage.getInstance().concept("Scenario").trigger = "Scenario";
    FreLanguage.getInstance().concept("TestFlow").trigger = "TestFlow";
    FreLanguage.getInstance().concept("Step").trigger = "Step";
    FreLanguage.getInstance().concept("LastStep").trigger = "LastStep";
    FreLanguage.getInstance().concept("Answer").trigger = "Answer";
    FreLanguage.getInstance().concept("Theory").trigger = "Theory";
    FreLanguage.getInstance().concept("Line").trigger = "Line";
    FreLanguage.getInstance().concept("Video").trigger = "Video";
    FreLanguage.getInstance().concept("WorkSheet").trigger = "WorkSheet";
    FreLanguage.getInstance().concept("ExamplePage").trigger = "ExamplePage";
    FreLanguage.getInstance().concept("InDepthMaterial").trigger = "InDepthMaterial";
    FreLanguage.getInstance().concept("Question").trigger = "Question";
    FreLanguage.getInstance().concept("SimpleNumber").trigger = "SimpleNumber";
    FreLanguage.getInstance().concept("Fraction").trigger = "/";
    FreLanguage.getInstance().concept("QuestionReference").referenceShortcut = {
        propertyName: "question",
        conceptName: "Question",
    };

    const conceptProjectionToPropertyProjection = new Map();
}
